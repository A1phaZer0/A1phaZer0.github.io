---
title: "Task Management"
author: A1phaZer0
layout: post
category: Kernel
---

> **Task Data**

When a new task is activated, task selector is stored into **TR**, TSS descriptor is cached also and new page directory physical address is stored into **CR3**.

Task can be entered by 
1. **JMP/CALL** instruction which either uses a task gate or directly uses a selector of TSS descriptor.
2. task gate if task comes from interrupt or exception.

<!--more-->

**Task State Segment:**

```bash
+----------------+----------------+
|I/O BITMAP BASE |              |T|
+----------------+----------------+
|                |LDT SELECTOR    |
+----------------+----------------+
|                |GS              |
+----------------+----------------+
|                |FS              |
+----------------+----------------+
|                |DS              |
+----------------+----------------+
|                |SS              |
+----------------+----------------+
|                |CS              |
+----------------+----------------+
|                |ES              |
+----------------+----------------+
|               EDI               |
+----------------+----------------+
|               ESI               |
+----------------+----------------+
|               EBP               |
+----------------+----------------+
|               ESP               |
+----------------+----------------+
|               EBX               |
+----------------+----------------+
|               EDX               |
+----------------+----------------+
|               ECX               |
+----------------+----------------+
|               EAX               |
+----------------+----------------+
|             EFLAGS              |
+----------------+----------------+
|               EIP               |
+----------------+----------------+
|               CR3               |
+----------------+----------------+
|                |SS2             |
+----------------+----------------+
|              ESP2               |
+----------------+----------------+
|                |SS1             |
+----------------+----------------+
|              ESP1               |
+----------------+----------------+
|                |SS0             |
+----------------+----------------+
|              ESP0               |
+----------------+----------------+
|                |PREV TSS SEL    |
+----------------+----------------+
```
